[记录] 给 GEN8 造一片 SAS 转接板    

运维教程硬件折腾 mhycy · 4月前

**Github 地址:** [hardware-gen8-sas-convert](https://github.com/mhycy/hardware-gen8-sas-convert)

### 前言

HP MicroServer Gen8 是个非常强大的微型服务器    
在充分改造/升级之后可以体积、噪声、性能、价格均可兼顾  
是个性价比极高的家用、办公室服务器选择 ( 商用不能上架 )

只是....这个服务器的引导配置不太人性化    
Gen8 只有USB接口、内部SD接口、以及SAS-1接口具有系统引导能力    
因为按照原始的设计, Gen8 的硬盘笼是用于整体组阵后提供服务的    
所以, 无论是 SD 引导还是 USB 引导都符合最初的设计，所以并没有系统引导方面的烦恼  

然而现在是家用....    
希望系统性能最大化追求性价比的家用~    
而且, Gen8 的 SAS-1、SAS-2 是可以跑到 6g 带宽的, SATA-5 并没有这个能力  

于是乎问题就这么来了~

> 如何给这个服务器增加一个SSD作为系统盘  
> 不但能跑在最高带宽下还能让硬盘笼满配HDD呢?

网络上的大神们有各种办法~    
但...大多数都选择插一个U盘进行引导 ( 然而可用带宽是 3g )    
( 家里的 HP ML10v2 选用了这个方案 )    
显然...不够优雅~

一个偶然的机会在淘宝上看到了一个产品~

> [HP/惠普 MicroServer Gen8 SAS1外置系统启动Diy MiniSAS转4Sata](https://item.taobao.com/item.htm?id=539337060943)    
> 把所有端口顺序往前挪一位, SAS-1 移出来作为外部的 SATA-5 使用  
> 并且利用硬盘笼背板的螺丝进行固定

这真的是个创意极好的产品~    
然而...到手后装上才发现, 和预想中的水冷散热排有所冲突....

> 于是本文的项目就这么来了....    
> **按照自己的需求重新造一个转接板**

### 工程目标

* 把所有端口顺序往前挪一位, SAS-1 移出来作为外部的 SATA-5 使用
* 不与水冷冲突, 尽可能的扁平化布线, 给水冷留出足够的空间
* 固定方式依旧使用硬盘背板的螺丝位
* 尽可能少的走线

### 工程坑点

* SAS 线缆全部都是交叉线 ( 于是乎需要好好判断输入输出线序 )
* MiniSAS 母座是贴片座且有一部分引脚位于母座正下方, 风枪难以焊接
* 阻抗合规、射频合规的布线会非常拥挤 (至少看上去合规)

### 参考文档

(点击下载)**[sas1r10.pdf](https://blog.mhycy.me/usr/uploads/2018/07/2114729528.pdf)**  [ Serial Attached SCSI - 1.1 (SAS-1.1) ]  **重点**    
(点击下载)**[sas3r06.pdf](https://blog.mhycy.me/usr/uploads/2018/07/2857330943.pdf)**  [ Serial Attached SCSI - 3 (SAS-3) ] **(这份工程中用不上)**

### 工程图片

**原理图**  
![原理图.png](https://i.loli.net/2018/07/11/5b461d9a762ff.png "原理图.png")

**PCB走线**    
线路完全阻抗匹配, 蛇形走线, 差分线长合规, 线路没有绕圈, 没有信号没走过孔, 算是满意了  
![PCB走线.png](https://i.loli.net/2018/07/11/5b461d9a62c7f.png "PCB走线.png")

**渲染图**    
右上角B格满满的产品说明, 估计做成黑色更好~  
![渲染图.png](https://i.loli.net/2018/07/11/5b461d9a846c1.png "渲染图.png")

**最终成品**    
PS. 然而~嘉立创那垃圾刷字字体没刷全！！！！    
5片, 返工多次, 换了一次低温锡膏, 成功两片...    
以后干这活肯定要找个贴片炉, BGA拆焊台也成....    
成本...各种原料买了200+  
![成品一批.JPG](https://i.loli.net/2018/07/11/5b461d9a87a5c.jpg "成品一批.JPG")